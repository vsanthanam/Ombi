<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Ombi  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="Ombi  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">Ombi 1.0.0 Docs</a> (95% documented)</p>
        <p class="header-right"><a href="https://ombi.network"><img src="img/gh.png"/>View on GitHub</a></p>
        <p class="header-right"><a href="dash-feed://https%3A%2F%2Fdocs.ombi.network%2Fdocsets%2FOmbi.xml"><img src="img/dash.png"/>Install in Dash</a></p>
        <p class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">Ombi Reference</a>
        <img id="carat" src="img/carat.png" />
        Ombi  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/RequestManager.html">RequestManager</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/HTTPError.html">HTTPError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/RequestError.html">RequestError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/RequestMethod.html">RequestMethod</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/URLRequest.html">URLRequest</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/AutomaticBodyDecoding.html">AutomaticBodyDecoding</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/AutomaticBodyEncoding.html">AutomaticBodyEncoding</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols.html#/s:4Ombi11HTTPRequestP">HTTPRequest</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols.html#/s:4Ombi7RequestP">Request</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Requestable.html">Requestable</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/AnyJSON.html">AnyJSON</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AnyRequestable.html">AnyRequestable</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/BodyDecoder.html">BodyDecoder</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/BodyEncoder.html">BodyEncoder</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ComposableRequest.html">ComposableRequest</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/RequestHeaders.html">RequestHeaders</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/RequestHeaders/Key.html">– Key</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/RequestHeaders/Value.html">– Value</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/RequestParameters.html">RequestParameters</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/RequestParameters/ParameterName.html">– ParameterName</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/RequestParameters/ParameterValue.html">– ParameterValue</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/RequestResponse.html">RequestResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ResponseValidator.html">ResponseValidator</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:4Ombi19AutomaticBodyCodinga">AutomaticBodyCoding</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='ombi' class='heading'>Ombi</h1>

<p>Elegant reactive networking with Combine and Swift</p>

<p><a href="https://github.com/vsanthanam/Ombi/releases/new"><img src="https://img.shields.io/github/v/release/vsanthanam/Ombi" alt="release"></a>
<a href="https://en.wikipedia.org/wiki/MIT_License"><img src="https://img.shields.io/github/license/vsanthanam/Ombi.svg" alt="license"></a>
<a href="https://docs.ombi.network"><img src="https://docs.ombi.network/badge.svg" alt="documentation"></a>
<a href="https://www.swift.org"><img src="https://img.shields.io/badge/Swift-5.4-orange" alt="swift-version"></a></p>
<h2 id='introduction' class='heading'>Introduction</h2>

<p>Ombi is a simple library built on top of <code>URLSession</code> and <code>Combine</code> that makes it very easy to make asynchronous network requests with reactive programming.
It requires Combine to work correctly, and does not support Swift runtime environments that do not support Combine.</p>
<h2 id='installation' class='heading'>Installation</h2>

<p>Ombi uses the <a href="https://swift.org/package-manager/">The Swift Package Manager</a> for distrubition. For now, this is the only supported method of installation, but others will be added soon.</p>

<p>Add <code>Ombi</code> to your <code>Package.swift</code> file like so:</p>
<pre class="highlight swift"><code><span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
    <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/Ombi/Ombi.git"</span><span class="p">,</span> <span class="o">.</span><span class="nf">upToNextMajor</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="s">"1.0.0"</span><span class="p">))</span>
<span class="p">]</span>
</code></pre>
<h2 id='basics' class='heading'>Basics</h2>

<p>Making a network request with ombi is pretty straight forward.
Create a <code><a href="Protocols/Requestable.html">Requestable</a></code>, initialize a <code><a href="Classes/RequestManager.html">RequestManager</a></code>, and invoke the <code>makeRequest</code> method using your <code><a href="Protocols/Requestable.html">Requestable</a></code>
You will recieve a <code>Publisher</code> which will allow you to handle network responses or errors as they occur.</p>

<p>There are two main ways to use the framework: Creating your own types that conform to <code><a href="Protocols/Requestable.html">Requestable</a></code>, or using the provided <code><a href="Structs/ComposableRequest.html">ComposableRequest</a></code> type, which already conform to <code><a href="Protocols/Requestable.html">Requestable</a></code>. This document will cover both strategies.</p>
<h3 id='requestable-interface' class='heading'>Requestable Interface</h3>

<p>The  <code><a href="Protocols/Requestable.html">Requestable</a></code>  protocol defines everything the <code><a href="Classes/RequestManager.html">RequestManager</a></code> needs to make the HTTP request.</p>

<p>See this example for a &ldquo;POST&rdquo; request to &ldquo;/posts/update&rdquo; that sends an <code><a href="Structs/AnyJSON.html">AnyJSON</a></code> body and expects a <code>String</code> response:</p>
<pre class="highlight swift"><code>
<span class="c1">// Define `Requestable`</span>
<span class="kd">struct</span> <span class="kt">MyRequest</span><span class="p">:</span> <span class="kt">Requestable</span> <span class="p">{</span>

    <span class="kd">typealias</span> <span class="kt">RequestBody</span> <span class="o">==</span> <span class="kt">AnyJSON</span>
    <span class="kd">typealias</span> <span class="kt">ResponseBody</span> <span class="o">==</span> <span class="kt">String</span>
    <span class="kd">typealias</span> <span class="kt">ResponseError</span> <span class="o">==</span> <span class="kt">HTTPError</span>

    <span class="k">var</span> <span class="nv">path</span><span class="p">:</span> <span class="kt">String</span> <span class="p">{</span>
        <span class="s">"/posts/update"</span>
    <span class="p">}</span>

    <span class="k">var</span> <span class="nv">method</span><span class="p">:</span> <span class="kt">RequestMethod</span> <span class="p">{</span>
        <span class="o">.</span><span class="n">post</span>
    <span class="p">}</span>

    <span class="k">var</span> <span class="nv">headers</span><span class="p">:</span> <span class="kt">RequestHeaders</span> <span class="p">{</span>
        <span class="p">[</span>
            <span class="o">.</span><span class="nv">contentType</span><span class="p">:</span> <span class="o">.</span><span class="nf">contentType</span><span class="p">(</span><span class="o">.</span><span class="n">json</span><span class="p">),</span>
            <span class="o">.</span><span class="nv">acceptType</span><span class="p">:</span> <span class="o">.</span><span class="nf">contentType</span><span class="p">(</span><span class="o">.</span><span class="n">json</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">}</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kt">AnyJSON</span> <span class="p">{</span>
        <span class="p">[</span>
            <span class="s">"title"</span> <span class="p">:</span> <span class="s">"My New Post"</span><span class="p">,</span>
            <span class="s">"body"</span> <span class="p">:</span> <span class="s">"lorem ipsum dolor sit amit"</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Initialize `Requestable`</span>
<span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="kt">MyRequest</span><span class="p">()</span>

<span class="c1">// Initialize `RequestManager`</span>
<span class="k">let</span> <span class="nv">requestManager</span> <span class="o">=</span> <span class="kt">MyRequestManager</span><span class="p">(</span><span class="nv">host</span><span class="p">:</span> <span class="s">"https://api.myapp.com"</span><span class="p">)</span>

<span class="c1">// Invoke `makeRequest(_:retries:sla:on:fallbackResponse:)` and observe</span>
<span class="k">let</span> <span class="nv">cancellable</span> <span class="o">=</span> <span class="n">requestManager</span><span class="o">.</span><span class="nf">makeRequest</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">sink</span><span class="p">(</span><span class="nv">receiveCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="n">completion</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">completion</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">finished</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="c1">// ... handle error here ...</span>
        <span class="p">}</span>
    <span class="p">},</span> <span class="nv">recieveValue</span><span class="p">:</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
        <span class="c1">// ... handle response here ...</span>
    <span class="p">})</span>
</code></pre>

<p>The <code><a href="Protocols/Requestable.html">Requestable</a></code> protocol has many other fields that aren&rsquo;t included in the example, but many of them are implemented for you by default. The main choice you need to make is what types you need to use to express <code>RequestBody</code> and <code>ResponseBody</code>. The <code><a href="Protocols/Requestable.html">Requestable</a></code> protocol requires you to provide <code><a href="Structs/BodyEncoder.html">BodyEncoder</a></code> and <code><a href="Structs/BodyDecoder.html">BodyDecoder</a></code> for the two types choose, respectively.  These are provided for you by default if you use any of the following types:</p>

<ul>
<li><code>String</code></li>
<li><code>Data</code></li>
<li><code><a href="Structs/AnyJSON.html">AnyJSON</a></code></li>
<li>Any <code>Codable</code> type</li>
</ul>

<p>If you are using a type not mentioned above, but still do not want to provide a encoder or decoder, make that type conform to <code><a href="Typealiases.html#/s:4Ombi19AutomaticBodyCodinga">AutomaticBodyCoding</a></code>, and <code><a href="Protocols/Requestable.html">Requestable</a></code> will generate the appropropriate encoder / decoder for you. A failure to use a type that doesn&rsquo;t provide its own encoder / decore, in conjunction with a failure to specify one within the <code><a href="Protocols/Requestable.html">Requestable</a></code> itself will result in a compile time error.</p>

<p>You can create a single type for every request you might make, or you can create parameterized, reusable types:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">LoginRequest</span><span class="p">:</span> <span class="kt">Requestable</span>

    <span class="nf">init</span><span class="p">(</span><span class="nv">username</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">password</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">body</span> <span class="o">=</span> <span class="kt">RequestBody</span><span class="p">(</span><span class="nv">username</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span> <span class="nv">password</span><span class="p">:</span> <span class="n">password</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">struct</span> <span class="kt">RequestBody</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">username</span><span class="p">:</span> <span class="kt">String</span>
        <span class="k">let</span> <span class="nv">password</span><span class="p">:</span> <span class="kt">String</span>
    <span class="p">}</span>

    <span class="kd">struct</span> <span class="kt">ResponseBody</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">token</span><span class="p">:</span> <span class="kt">String</span>
    <span class="p">}</span>

    <span class="kd">typealias</span> <span class="kt">ResponseError</span> <span class="o">==</span> <span class="kt">HTTPError</span>

    <span class="k">let</span> <span class="nv">path</span><span class="p">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">"/login"</span>

    <span class="k">let</span> <span class="nv">method</span><span class="p">:</span> <span class="kt">RequestMethod</span> <span class="o">=</span> <span class="o">.</span><span class="k">get</span>

    <span class="k">var</span> <span class="nv">headers</span><span class="p">:</span> <span class="kt">RequestHeaders</span> <span class="p">{</span>
        <span class="p">[</span>
            <span class="o">.</span><span class="nv">acceptType</span><span class="p">:</span> <span class="o">.</span><span class="nf">contentType</span><span class="p">(</span><span class="o">.</span><span class="n">json</span><span class="p">),</span>
            <span class="o">.</span><span class="nv">contentType</span><span class="p">:</span> <span class="o">.</span><span class="nf">contentType</span><span class="p">(</span><span class="o">.</span><span class="n">json</span><span class="p">)</span>
            <span class="s">"My-Custom-Header"</span><span class="p">:</span> <span class="s">"My-Value"</span>
        <span class="p">]</span>
    <span class="p">}</span>

    <span class="k">let</span> <span class="nv">body</span><span class="p">:</span> <span class="kt">RequestBody</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="kt">LoginRequest</span><span class="p">(</span><span class="nv">username</span><span class="p">:</span> <span class="s">"MyUserName"</span><span class="p">,</span> <span class="nv">password</span><span class="p">:</span> <span class="s">"MyPassword"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">manager</span> <span class="o">=</span> <span class="kt">RequestManager</span><span class="p">(</span><span class="nv">host</span><span class="p">:</span> <span class="s">"https://api.myapp.com"</span><span class="p">)</span>

<span class="k">var</span> <span class="nv">token</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>

<span class="k">let</span> <span class="nv">cancellable</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="nf">makeRequest</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">replaceError</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="o">.</span><span class="n">empty</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">map</span><span class="p">(\</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">token</span><span class="p">)</span>
    <span class="o">.</span><span class="n">sink</span> <span class="p">{</span> <span class="n">token</span> <span class="k">in</span>
        <span class="k">self</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="n">token</span>
    <span class="p">}</span>
</code></pre>
<h3 id='requestmanager' class='heading'>RequestManager</h3>

<p>While most of the properties of the request are definied within the <code><a href="Protocols/Requestable.html">Requestable</a></code> a few are properties of the request manager, and a few other are additional parameters in the <code>makeRequest</code> method.</p>

<p>In addition to providing the host URL, the request manager can automatically inject headers, setup retries counts, setup a response SLA, and more.</p>
<pre class="highlight swift"><code><span class="c1">/// Custom Log</span>
<span class="k">let</span> <span class="nv">myLog</span> <span class="o">=</span> <span class="kt">OSLog</span><span class="p">(</span><span class="nv">subsystem</span><span class="p">:</span> <span class="s">"com.developer.subsystem"</span><span class="p">,</span> <span class="nv">category</span><span class="p">:</span> <span class="s">"api.myapp.com"</span><span class="p">)</span>

<span class="k">let</span> <span class="nv">manager</span> <span class="o">=</span> <span class="kt">RequestManager</span><span class="p">(</span><span class="nv">host</span><span class="p">:</span> <span class="s">"https://api.myapp.com"</span><span class="p">,</span> <span class="nv">log</span><span class="p">:</span> <span class="n">myLog</span><span class="p">)</span>

<span class="c1">// Inject custom headers</span>
<span class="k">let</span> <span class="nv">manager</span><span class="o">.</span><span class="n">additionalHeaders</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">.</span><span class="nv">authorization</span><span class="p">:</span> <span class="o">.</span><span class="nf">authorization</span><span class="p">(</span><span class="nv">type</span><span class="p">:</span> <span class="o">.</span><span class="n">bearer</span><span class="p">,</span> <span class="nv">token</span><span class="p">:</span> <span class="s">"MyToken"</span><span class="p">)</span>
<span class="p">]</span> <span class="c1">// these headers will be added to every request</span>

<span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="kt">MyRequest</span><span class="p">()</span> <span class="c1">// conforms to `Requestable`</span>
<span class="k">let</span> <span class="nv">cancellable</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="nf">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span>
                                      <span class="nv">retries</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                      <span class="nv">sla</span><span class="p">:</span> <span class="o">.</span><span class="nf">seconds</span><span class="p">(</span><span class="mi">60</span><span class="p">),</span>
                                      <span class="nv">on</span><span class="p">:</span> <span class="kt">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="p">)</span> <span class="c1">// specify sla, retry count, and dispatch queue</span>
    <span class="o">.</span><span class="nf">sink</span><span class="p">(</span><span class="nv">receiveCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="n">completion</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">completion</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">finished</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="c1">// ... handle error ...</span>
        <span class="p">}</span>
    <span class="p">},</span> <span class="nv">receiveValue</span><span class="p">:</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
        <span class="c1">// ... handle response ...</span>
    <span class="p">})</span>
</code></pre>
<h2 id='responses-errors-and-validation' class='heading'>Responses, Errors and Validation</h2>

<p>The publisher returned by <code>makeRequest</code> uses a generic types for its <code>Output</code> and its <code>Error</code>. The output is a <code><a href="Structs/RequestResponse.html">RequestResponse</a></code>, a generic type specialized using the <code><a href="Protocols/Requestable.html">Requestable</a></code>&lsquo;s <code>ResponseBody</code> constraint. The error is a <code><a href="Enums/RequestError.html">RequestError</a></code> specialized using the <code><a href="Protocols/Requestable.html">Requestable</a></code>&rsquo;s <code>ResponseError</code> containt.</p>
<h3 id='requestresponse' class='heading'>RequestResponse</h3>

<p>If the request doesnt fail, the publisher will emit a single <code><a href="Structs/RequestResponse.html">RequestResponse</a></code> value before completing. This value type contains the URL, headers, status code, and decoded body content of the request. </p>
<h3 id='requesterror-and-validation' class='heading'>RequestError and Validation</h3>

<p>The <code><a href="Enums/RequestError.html">RequestError</a></code> type describes a number of errors that could occur when making a request, from a broken connection, to failed encoding // decoding, to timeouts and SLA violations.</p>

<p>However, a request could complete and still fail. Once a <code><a href="Structs/RequestResponse.html">RequestResponse</a></code> is generated, the <code><a href="Protocols/Requestable.html">Requestable</a></code>(s) <code>responseValidator</code> is used to examine the contents of the request for <code>ResponseError</code>(s). The default response validator allows any request to complete, regardless of its content. If you specialize your <code><a href="Protocols/Requestable.html">Requestable</a></code> with <code>ResponseError == HTTPError</code>, the default response validator will perform basic validation based on the HTTP status code. If you choose to provide your own error model, remember to provide a <code><a href="Structs/ResponseValidator.html">ResponseValidator</a></code> with the <code><a href="Protocols/Requestable.html">Requestable</a></code> as well.</p>

<p>All <code><a href="Structs/RequestResponse.html">RequestResponse</a></code>(s), including ones provided by the <code><a href="Classes/RequestManager.html">RequestManager</a></code>&rsquo;s <code>fallbackResponse</code> parameter, will go through validation step. This means that even your backup response provided from disk could still result in an error, for example, of that response&rsquo;s status code is 404 and the <code><a href="Protocols/Requestable.html">Requestable</a></code> has been specialized with a <code>ResponseError</code> of type <code><a href="Enums/HTTPError.html">HTTPError</a></code>.</p>

<p>If you don&rsquo;t want to bother with validation at all, just specialize your <code><a href="Protocols/Requestable.html">Requestable</a></code> with <code>Error</code>, and every completed <code><a href="Structs/RequestResponse.html">RequestResponse</a></code> will be allowed to pass.</p>
<h2 id='composablerequest' class='heading'>ComposableRequest</h2>

<p>If you don&rsquo;t want to create your own types that conform to <code><a href="Protocols/Requestable.html">Requestable</a></code>, Ombi provides a reusable generic value type, <code><a href="Structs/ComposableRequest.html">ComposableRequest</a></code>, that you dynamically configure at runtime. <code><a href="Structs/ComposableRequest.html">ComposableRequest</a></code> has a closure-based syntax that allows your instance to capture unrelated values. The closures are not executed until the request is actually made. The first example in this document, written with a custom <code><a href="Protocols/Requestable.html">Requestable</a></code> type, might look like this when expressed with a <code><a href="Structs/ComposableRequest.html">ComposableRequest</a></code></p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">cancellable</span> <span class="o">=</span> <span class="kt">ComposableRequest</span><span class="o">&lt;</span><span class="kt">AnyJSON</span><span class="p">,</span> <span class="kt">String</span><span class="p">,</span> <span class="kt">HTTPError</span><span class="o">&gt;</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">path</span><span class="p">(</span><span class="s">"/posts/update"</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">method</span><span class="p">(</span><span class="s">".post"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">headers</span> <span class="p">{</span>
        <span class="c1">// ... capture some things or do some work ...</span>
        <span class="p">[</span>
            <span class="o">.</span><span class="nv">contentType</span><span class="p">:</span> <span class="o">.</span><span class="nf">contentType</span><span class="p">(</span><span class="o">.</span><span class="n">json</span><span class="p">),</span>
            <span class="o">.</span><span class="nv">acceptType</span><span class="p">:</span> <span class="o">.</span><span class="nf">contentType</span><span class="p">(</span><span class="o">.</span><span class="n">json</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">}</span>
    <span class="o">.</span><span class="n">body</span> <span class="p">{</span>
        <span class="c1">// ... capture some things or do some work ...</span>
        <span class="p">[</span>
            <span class="s">"title"</span> <span class="p">:</span> <span class="s">"My New Post"</span><span class="p">,</span>
            <span class="s">"body"</span> <span class="p">:</span> <span class="s">"lorem ipsum dolor sit amit"</span>
        <span class="p">]</span>
    <span class="p">}</span>
    <span class="o">.</span><span class="nf">send</span><span class="p">(</span><span class="nv">on</span><span class="p">:</span> <span class="s">"https://api.myapp.com"</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">sink</span><span class="p">(</span><span class="nv">receiveCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="n">completion</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">completion</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">finished</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="c1">// ... handle error here ...</span>
        <span class="p">}</span>
    <span class="p">},</span> <span class="nv">recieveValue</span><span class="p">:</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
        <span class="c1">// ... handle response here ...</span>
    <span class="p">})</span>
</code></pre>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2021 <a class="link" href="https://www.vsanthanam.com" target="_blank" rel="external">Varun</a>. All rights reserved. (Last updated: 2021-05-20)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.7</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
